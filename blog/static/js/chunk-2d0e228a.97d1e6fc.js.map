{"version":3,"sources":["webpack:///./src/views/Talk.vue?84aa","webpack:///src/views/Talk.vue","webpack:///./src/views/Talk.vue?8b92","webpack:///./src/views/Talk.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","commentList","commentFinished","_e","on","submitComment","staticRenderFns","name","components","CommentInput","CommentList","data","created","loadCommentsByBlogId","methods","undefined","blogId","$message","showClose","type","message","innerHttp","submitCommentSuccess","submitCommentFail","reason","comment","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,mBAAmB,WAAW,CAACN,EAAIO,GAAG,UAAUH,EAAG,IAAI,CAACI,YAAY,wBAAwBJ,EAAG,eAAe,CAACE,MAAM,CAAC,SAAWN,EAAIS,eAAeL,EAAG,aAAa,CAACE,MAAM,CAAC,mBAAmB,WAAW,CAACN,EAAIO,GAAG,UAAUH,EAAG,IAAI,CAACI,YAAY,mBAAqBR,EAAIU,gBAA+EV,EAAIW,KAAlEP,EAAG,gBAAgB,CAACQ,GAAG,CAAC,iBAAiBZ,EAAIa,kBAA2B,IACheC,EAAkB,G,oCCuBtB,GACEC,KAAM,OACNC,WAAY,CACVC,aAAJ,OACIC,YAAJ,QAEEC,KANF,WAOI,MAAO,CACLV,YAAa,GACbC,iBAAiB,IAGrBU,QAZF,WAaInB,KAAKoB,qBAAqB,IAE5BC,QAAS,CACPD,qBADJ,SACA,mBACqBE,IAAXC,GAAwBA,EAAS,EACnCvB,KAAKwB,SAAS,CACZC,WAAW,EACXC,KAAM,QACNC,QAAS,WAGXC,EAAR,KACA,mBACA,kBACU,EAAV,+BAEA,wBAGIC,qBAjBJ,WAkBM7B,KAAKwB,SAAS,CACZC,WAAW,EACXE,QAAS,kBACTD,KAAM,YAER1B,KAAKS,iBAAkB,GAEzBqB,kBAzBJ,SAyBA,GACM9B,KAAKwB,SAAS,CACZC,WAAW,EACXE,QAAS,WAAaI,EACtBL,KAAM,WAGVd,cAhCJ,SAgCA,cACMoB,EAAQT,OAAS,EAEjBK,EAAN,KACA,oBACQ,KAAR,oBAEA,kBACQ,IAAR,gBACA,KACU,EAAV,wBACA,KACU,EAAV,uBACA,MACU,EAAV,qCAGA,0BCxF8U,I,YCO1UK,EAAY,eACd,EACAnC,EACAe,GACA,EACA,KACA,WACA,MAIa,aAAAoB,E","file":"static/js/chunk-2d0e228a.97d1e6fc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-divider',{attrs:{\"content-position\":\"center\"}},[_vm._v(\" 历史留言 \"),_c('i',{staticClass:\"el-icon-s-comment\"})]),_c('comment-list',{attrs:{\"comments\":_vm.commentList}}),_c('el-divider',{attrs:{\"content-position\":\"center\"}},[_vm._v(\" 开始留言 \"),_c('i',{staticClass:\"el-icon-edit\"})]),(!_vm.commentFinished)?_c('comment-input',{on:{\"comment-submit\":_vm.submitComment}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Author      : YaleXin\r\n * @Email       : me@yalexin.top\r\n * @LastEditors : YaleXin\r\n-->\r\n<template>\r\n  <div>\r\n    <el-divider content-position=\"center\">\r\n      历史留言\r\n      <i class=\"el-icon-s-comment\"></i>\r\n    </el-divider>\r\n    <comment-list :comments=\"commentList\"></comment-list>\r\n    <el-divider content-position=\"center\">\r\n      开始留言\r\n      <i class=\"el-icon-edit\"></i>\r\n    </el-divider>\r\n    <comment-input v-if=\"!commentFinished\" @comment-submit=\"submitComment\"></comment-input>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport innerHttp from \"../network/innerHttp.js\";\r\nimport CommentInput from \"../components/CommentInput.vue\";\r\nimport CommentList from \"../components/CommentList.vue\";\r\nexport default {\r\n  name: \"Talk\",\r\n  components: {\r\n    CommentInput,\r\n    CommentList\r\n  },\r\n  data() {\r\n    return {\r\n      commentList: [],\r\n      commentFinished: false\r\n    };\r\n  },\r\n  created() {\r\n    this.loadCommentsByBlogId(0);\r\n  },\r\n  methods: {\r\n    loadCommentsByBlogId(blogId) {\r\n      if (blogId === undefined || blogId < 0) {\r\n        this.$message({\r\n          showClose: true,\r\n          type: \"error\",\r\n          message: \"无法请求留言\"\r\n        });\r\n      } else {\r\n        innerHttp\r\n          .get(\"/comment/\" + blogId)\r\n          .then(res => {\r\n            this.commentList = res.data.comments;\r\n          })\r\n          .catch(e => {});\r\n      }\r\n    },\r\n    submitCommentSuccess() {\r\n      this.$message({\r\n        showClose: true,\r\n        message: \"评论成功，请耐心等待管理员审核\",\r\n        type: \"success\"\r\n      });\r\n      this.commentFinished = true;\r\n    },\r\n    submitCommentFail(reason) {\r\n      this.$message({\r\n        showClose: true,\r\n        message: \"评论失败，原因：\" + reason,\r\n        type: \"error\"\r\n      });\r\n    },\r\n    submitComment(comment) {\r\n      comment.blogId = 0;\r\n      console.log(comment);\r\n      innerHttp\r\n        .put(\"/comment/add\", {\r\n          data: JSON.stringify(comment)\r\n        })\r\n        .then(res => {\r\n          let result = res.data.result;\r\n          if (result == 0) {\r\n            this.submitCommentFail(\"不明\");\r\n          } else if (result == 1) {\r\n            this.submitCommentSuccess();\r\n          } else if (result == 2) {\r\n            this.submitCommentFail(\"过于频繁，请一分钟后尝试\");\r\n          }\r\n        })\r\n        .catch(e => {});\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Talk.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Talk.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Talk.vue?vue&type=template&id=de85abbc&scoped=true&\"\nimport script from \"./Talk.vue?vue&type=script&lang=js&\"\nexport * from \"./Talk.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"de85abbc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}